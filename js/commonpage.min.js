document.addEventListener("DOMContentLoaded",function(){const e=Array.from(document.querySelectorAll(".page-link")),t=window.location.pathname.replace(/\/$/,"");let n=parseInt(new URLSearchParams(window.location.search).get("page"))||1;const o=(e,n,a)=>{const o=e.replace(new RegExp(`/${a}(P\\d+)?$`),"");return 1===n?`${o}/${a}`:`${o}/${a}P${n}`};e.forEach(n=>{const a=parseInt(n.getAttribute("data-page")),i=n.getAttribute("data-page-prefix")||"page",c=o(t,a,i);n.href=c,a===n?n.classList.add("current"):n.classList.remove("current")}),e.forEach(n=>{n.addEventListener("click",a=>{a.preventDefault();const i=parseInt(n.getAttribute("data-page"));e.forEach(n=>{const a=parseInt(n.getAttribute("data-page"));a===i?n.classList.add("current"):n.classList.remove("current")});const c=n.getAttribute("data-page-prefix")||"page",r=o(t,i,c),d=new URL(window.location);d.pathname=r,d.search="",history.pushState({},"",d.href),window.location.reload()})});const a=()=>{const n=e[0]?.getAttribute("data-page-prefix")||"page",a=parseInt(window.location.pathname.match(new RegExp(`${n}P(\\d+)`))?.[1])||1;e.forEach(n=>{const e=parseInt(n.getAttribute("data-page"));e===a?n.classList.add("current"):n.classList.remove("current")})};a()});