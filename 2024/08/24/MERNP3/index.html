<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><title>MERN 專案STEP | HenRsの小窩</title><meta name="author" content="HenRs"><meta name="description" content="有關於『我』"><meta name="keywords" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><link rel="icon" href="/images/avatar.webp"><link rel="preconnect" href="https://s4.zstatic.net"><script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><link rel="preconnect" href="https://fonts.googleapis.cn"><link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"><script>const mixins={}</script><script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script><script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script><script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"><script src="/js/lib/highlight.js"></script><script src="/js/lib/preview.js"></script><link rel="stylesheet" href="/css/main.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="layout"><transition name="fade"><div id="loading" v-show="loading"><div id="loading-circle"><h2>LOADING</h2><p>加載中···請稍後，如過慢請清理緩存</p><img src="/images/loading.gif"></div></div></transition><div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}"><nav id="desktop-menu"><a class="title" href="/"><span>HENRSの小窩</span> </a><a href="/"><i class="fa-solid fa-house fa-fw"></i> <span>&ensp;首頁</span> </a><a href="/about"><i class="fa-solid fa-id-card fa-fw"></i> <span>&ensp;關於</span> </a><a href="/archives"><i class="fa-solid fa-box-archive fa-fw"></i> <span>&ensp;項目</span> </a><a href="/categories"><i class="fa-solid fa-bookmark fa-fw"></i> <span>&ensp;類別</span> </a><a href="/tags"><i class="fa-solid fa-tags fa-fw"></i> <span>&ensp;標籤</span></a></nav><nav id="mobile-menu"><div class="title" @click="showMenuItems = !showMenuItems"><i class="fa-solid fa-bars fa-fw"></i> <span>&emsp;HENRSの小窩</span></div><transition name="slide"><div class="items" v-show="showMenuItems"><a href="/"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-house fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">首頁</div></div></a><a href="/about"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-id-card fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">關於</div></div></a><a href="/archives"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-box-archive fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">項目</div></div></a><a href="/categories"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-bookmark fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">類別</div></div></a><a href="/tags"><div class="item"><div style="min-width:20px;max-width:50px;width:10%"><i class="fa-solid fa-tags fa-fw"></i></div><div style="min-width:100px;max-width:150%;width:20%">標籤</div></div></a></div></transition></nav></div><transition name="fade"><div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div></transition><div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'"><div class="article"><div><h1>MERN 專案STEP</h1></div><div class="info"><span class="date"><span class="icon"><i class="fa-solid fa-calendar fa-fw"></i> </span>2024/8/24</span></div><div class="content" v-pre><h3 id="8-創建-react-組件"><a class="markdownIt-Anchor" href="#8-創建-react-組件"></a> 8. 創建 React 組件</h3><p>在 components 資料夾中，創建以下文件：</p><ul><li>Register.js</li><li>login.js</li><li>profile.js</li><li>nav.js</li></ul><p>你可以從以下連結獲取這些組件的範例程式碼：</p><ul><li><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/1410822048/My-storehouse@main/register-component.js">Register.js</a></li><li><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/1410822048/My-storehouse@main/login-component.js">login.js</a></li><li><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/1410822048/My-storehouse@latest/profile-component.js">profile.js</a></li><li><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/1410822048/My-storehouse@main/nav-component.js">nav.js</a></li></ul><h3 id="9-將組件導入-appjs"><a class="markdownIt-Anchor" href="#9-將組件導入-appjs"></a> 9. 將組件導入 App.js</h3><p>在 App.js 中導入這些組件，並設置相應的路由</p><pre class="highlight"><code class="js">import Register from &quot;./components/register-component&quot;;
import Login from &quot;./components/login-component&quot;;
import Profile from &quot;./components/profile-component&quot;;

function App() &#123;
  return (
    &lt;BrowserRouter&gt;
      &lt;Routes&gt;
        &lt;Route path=&quot;/&quot; element=&#123;&lt;Layout /&gt;&#125;&gt;
          &lt;Route index element=&#123;&lt;Home /&gt;&#125; /&gt;
          &lt;Route path=&quot;register&quot; element=&#123;&lt;Register /&gt;&#125; /&gt;
          &lt;Route path=&quot;login&quot; element=&#123;&lt;Login /&gt;&#125; /&gt;
          &lt;Route path=&quot;profile&quot; element=&#123;&lt;Profile /&gt;&#125; /&gt;
        &lt;/Route&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
&#125;
</code></pre><hr><h1 id="建立前後端橋樑"><a class="markdownIt-Anchor" href="#建立前後端橋樑"></a> 建立前後端橋樑</h1><p> </p><h3 id="10-在-registerjs-中設置註冊功能"><a class="markdownIt-Anchor" href="#10-在-registerjs-中設置註冊功能"></a> 10. 在 Register.js 中設置註冊功能</h3><p>在 Register.js 中導入 auth.service，並設置基本的註冊功能</p><pre class="highlight"><code class="JSX">import AuthService from &quot;../services/auth.service&quot;;
import &#123; useNavigate &#125; from &quot;react-router-dom&quot;;

const RegisterComponent = () =&gt; &#123;
  const Navigate = useNavigate();
  let [username, setUsername] = useState(&quot;&quot;);
  let [email, setEmail] = useState(&quot;&quot;);
  let [password, setPassword] = useState(&quot;&quot;);
  let [role, setRole] = useState(&quot;&quot;);

  const HandleUsername = (e) =&gt; setUsername(e.target.value);
  const HandleEmail = (e) =&gt; setEmail(e.target.value);
  const HandlePassword = (e) =&gt; setPassword(e.target.value);
  const HandleRole = (e) =&gt; setRole(e.target.value);

  const HandleRegister = async () =&gt; &#123;
    try &#123;
      await AuthService.register(username, email, password, role);
      Navigate(&quot;/login&quot;); // 註冊成功後跳轉到登入頁面
    &#125; catch (e) &#123;
      console.log(e);
    &#125;
  &#125;;

  return (
    &lt;div&gt;
      &lt;input type=&quot;text&quot; onChange=&#123;HandleUsername&#125; placeholder=&quot;用戶名&quot; /&gt;
      &lt;input type=&quot;email&quot; onChange=&#123;HandleEmail&#125; placeholder=&quot;電子信箱&quot; /&gt;
      &lt;input type=&quot;password&quot; onChange=&#123;HandlePassword&#125; placeholder=&quot;密碼&quot; /&gt;
      &lt;select onChange=&#123;HandleRole&#125;&gt;
        &lt;option value=&quot;Student&quot;&gt;學生&lt;/option&gt;
        &lt;option value=&quot;Instructor&quot;&gt;教師&lt;/option&gt;
      &lt;/select&gt;
      &lt;button onClick=&#123;HandleRegister&#125;&gt;註冊&lt;/button&gt;
    &lt;/div&gt;
  );
&#125;;
</code></pre><h3 id="11-在-loginjs-中設置登入功能"><a class="markdownIt-Anchor" href="#11-在-loginjs-中設置登入功能"></a> 11. 在 Login.js 中設置登入功能</h3><p>在 Login.js 中設置基本的登入功能</p><pre class="highlight"><code class="JSX">import AuthService from &quot;../services/auth.service&quot;;
import &#123; useNavigate &#125; from &quot;react-router-dom&quot;;

const LoginComponent = () =&gt; &#123;
  const Navigate = useNavigate();
  let [email, setEmail] = useState(&quot;&quot;);
  let [password, setPassword] = useState(&quot;&quot;);

  const handleEmailChange = (e) =&gt; setEmail(e.target.value);
  const handlePasswordChange = (e) =&gt; setPassword(e.target.value);

  const HandleLogin = async () =&gt; &#123;
    try &#123;
      let response = await AuthService.login(email, password);
      localStorage.setItem(&quot;user&quot;, JSON.stringify(response.data));
      setCurrentUser(AuthService.getCurrentUser());
      Navigate(&quot;/profile&quot;); // 登入成功後跳轉到個人資料頁面
    &#125; catch (e) &#123;
      console.log(e.response);
    &#125;
  &#125;;

  return (
    &lt;div&gt;
      &lt;input type=&quot;email&quot; onChange=&#123;handleEmailChange&#125; placeholder=&quot;電子信箱&quot; /&gt;
      &lt;input
        type=&quot;password&quot;
        onChange=&#123;handlePasswordChange&#125;
        placeholder=&quot;密碼&quot;
      /&gt;
      &lt;button onClick=&#123;HandleLogin&#125;&gt;登入&lt;/button&gt;
    &lt;/div&gt;
  );
&#125;;
</code></pre><h3 id="12-在-profilejs-中設置個人資料功能"><a class="markdownIt-Anchor" href="#12-在-profilejs-中設置個人資料功能"></a> 12. 在 Profile.js 中設置個人資料功能</h3><p>在 Profile.js 中導入 auth.service，並設置基本的個人資料顯示功能</p><pre class="highlight"><code class="JSX">import &#123; useState, useEffect &#125; from &quot;react&quot;;
import AuthService from &quot;../services/auth.service&quot;;

const ProfileComponent = () =&gt; &#123;
  const [username, setUsername] = useState(&quot;&quot;); // 用户名
  const [password, setPassword] = useState(&quot;&quot;); // 密碼

  useEffect(() =&gt; &#123;
    const user = AuthService.getCurrentUser();
    if (user) &#123;
      setCurrentUser(user);
    &#125;
  &#125;, [setCurrentUser]);
&#125;
</code></pre><h3 id="13-將-currentuser-狀態提升到-appjs"><a class="markdownIt-Anchor" href="#13-將-currentuser-狀態提升到-appjs"></a> 13. 將 currentUser 狀態提升到 App.js</h3><p>刪除 Profile.js 中的 currentUser 狀態，並將其提升到 App.js 中</p><pre class="highlight"><code class="JSX">import &#123; useState &#125; from &quot;react&quot;;
import AuthService from &quot;./services/auth.service&quot;;

function App() &#123;
  let [currentUser, setCurrentUser] = useState(AuthService.getCurrentUser());

  return (
    &lt;BrowserRouter&gt;
      &lt;Routes&gt;
        &lt;Route
          path=&quot;/&quot;
          element=&#123;
            &lt;Layout currentUser=&#123;currentUser&#125; setCurrentUser=&#123;setCurrentUser&#125; /&gt;
          &#125;
        &gt;
          &lt;Route index element=&#123;&lt;Home /&gt;&#125; /&gt;
          &lt;Route path=&quot;register&quot; element=&#123;&lt;Register /&gt;&#125; /&gt;
          &lt;Route
            path=&quot;login&quot;
            element=&#123;
              &lt;Login
                currentUser=&#123;currentUser&#125;
                setCurrentUser=&#123;setCurrentUser&#125;
              /&gt;
            &#125;
          /&gt;
          &lt;Route
            path=&quot;profile&quot;
            element=&#123;
              &lt;Profile
                currentUser=&#123;currentUser&#125;
                setCurrentUser=&#123;setCurrentUser&#125;
              /&gt;
            &#125;
          /&gt;
        &lt;/Route&gt;
      &lt;/Routes&gt;
    &lt;/BrowserRouter&gt;
  );
&#125;
</code></pre><h3 id="14-將-currentuser-傳遞給子組件"><a class="markdownIt-Anchor" href="#14-將-currentuser-傳遞給子組件"></a> 14. 將 currentUser 傳遞給子組件</h3><p>在 Layout.js 和其他組件中，接收 currentUser 和 setCurrentUser 作為 props</p><pre class="highlight"><code class="JSX">const Layout = (&#123; currentUser, setCurrentUser &#125;) =&gt; &#123;
  return (
    &lt;div&gt;
      &lt;Nav currentUser=&#123;currentUser&#125; setCurrentUser=&#123;setCurrentUser&#125; /&gt;
      &lt;main&gt;
        &lt;Outlet /&gt;
      &lt;/main&gt;
    &lt;/div&gt;
  );
&#125;;
</code></pre><p> <br> </p><p class="centerP"><strong>恭喜完成全部設定</strong></p><p> <br> </p><div class="pagination"><a href="#" class="page-link" data-page-prefix="MERN" data-page="1">1 </a><a href="#" class="page-link" data-page-prefix="MERN" data-page="2">2 </a><a href="#" class="page-link" data-page-prefix="MERN" data-page="3">3</a></div></div></div><footer id="footer"><div id="footer-wrap"><div>&copy; 2024 - 2025 HenRsの小窩 <span id="footer-icon"><i class="fa-solid fa-font-awesome fa-fw"></i> </span>&commat;HenRs</div><div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp; <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a></div></div></footer></div><transition name="fade"><div id="preview" ref="preview" v-show="previewShow"><img id="preview-content" ref="previewContent"></div></transition></div><script src="/js/main.js" defer></script><canvas id="fireworks" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:32767"></canvas><script src="https://s4.zstatic.net/ajax/libs/animejs/3.2.1/anime.min.js"></script><script src="/js/fireworks.min.js" defer></script><script src="/js/commonpage.min.js" defer></script></body></html>